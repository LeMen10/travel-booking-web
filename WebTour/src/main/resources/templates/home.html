<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ND Travel</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
     <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
    <link rel="shortcut icon" href="/image/icon.png" type="image/x-icon">
    <link rel="stylesheet" href="/css/home_user.css">
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
        }
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            background-color: #fff;
            border-bottom: 1px solid #ddd;
        }
        .navbar .logo img {
            height: 40px;
        }
        .navbar .menu {
            display: flex;
            gap: 20px;
        }
        .navbar .menu a {
            text-decoration: none;
            color: #333;
            font-size: 16px;
            padding: 10px 15px;
            border-radius: 20px;
        }
        .navbar .menu a.active {
            background-color: #e6f0ff;
            color: #007bff;
        }
        .navbar .icons {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .navbar .icons i {
            font-size: 20px;
            color: #007bff;
        }
        .navbar .icons .badge {
            position: relative;
        }
        .navbar .icons .badge::after {
            content: '12';
            position: absolute;
            top: -5px;
            right: -10px;
            background-color: #007bff;
            color: #fff;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 12px;
        }
        .navbar .hotline {
            font-size: 16px;
            color: #007bff;
        }
        .navbar .hotline span {
            font-weight: bold;
        }
        .hero {
            background-color: #0056b3;
            color: #fff;
            text-align: center;
            padding: 50px 20px;
            position: relative;
        }
        .hero .content {
            max-width: 600px;
            margin: 0 auto;
        }
        .hero .content h1 {
            font-size: 36px;
            margin-bottom: 20px;
        }
        .hero .content p {
            font-size: 18px;
            margin-bottom: 30px;
        }
        .hero .content .btn {
            background-color: #007bff;
            color: #fff;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            font-size: 16px;
        }
        .hero .content .btn i {
            margin-left: 10px;
        }

        /* Search Box and Overlay Styles */
        .search-box {
            display: none; /* Initially hidden */
            justify-content: center;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000;
            transition: opacity 0.3s ease, transform 0.3s ease; /* Thêm hiệu ứng chuyển động */
		    opacity: 0; /* Khởi tạo opacity là 0 */
		    transform: translateY(-20px); /* Khởi tạo vị trí lệch lên */
        }
        .search-box.active {
		    display: flex; /* Hiển thị box khi có class active */
		    opacity: 1; /* Đặt opacity thành 1 khi hiển thị */
		    transform: translateY(0); /* Trở về vị trí ban đầu */
		}
        /* Thanh header search-top */
		.search-top {
		    position: fixed;
		    top: 0;
		    left: 0;
		    width: 100%;
		    background-color: #fff; /* Màu nền trắng cho thanh search */
		    z-index: 1001; /* Đặt z-index cao hơn navbar để che nó */
		    display: flex;
		    justify-content: center;
		    align-items: center;
		    padding: 10px 0; /* Đệm để tạo khoảng trống trên dưới */
		    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* Tạo đổ bóng cho thanh header */
		    height: 15%;
		}
		
		/* Search container trong thanh search-top */
		.search-container {
		    display: flex;
		    align-items: center;
		    justify-content: center;
		    border: 1px solid #00a0e3;
		    border-radius: 25px;
		    padding: 5px 10px;
		    width: 50%; /* Đặt kích thước thanh search tùy theo ý muốn */
		    background-color: white;
		}
		
		.search-container input {
		    border: none;
		    outline: none;
		    flex: 1;
		    padding: 10px;
		    font-size: 16px;
		}
		
		.search-container .fa-search {
		    color: #00a0e3;
		    font-size: 20px;
		}
		
		/* Làm tối nền khi hiển thị search-box */
		.empty-box {
		    position: fixed;
		    top: 0;
		    left: 0;
		    width: 100%;
		    height: 100%;
		    background-color: rgba(0, 0, 0, 0.5); /* Màu nền tối */
		    z-index: 1000; /* Đặt dưới search-top nhưng cao hơn nội dung khác */
		}
		
		.search-container-main {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
           
        }
        .search-box-main {
            display: flex;
            align-items: center;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 10px;
        }
        .search-box-main input{
            border: 1px solid #17a2b8;
            border-radius: 5px;
            padding: 10px;
           /*  margin: 0 5px; */
            outline: none;
        }
        .search-box-main button {
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 5px;
            padding: 10px 20px;
            cursor: pointer;
            margin-left: 5px;
        }
        #main-btn-search:hover{
        	background-color: #0396ff;
        }
        .search-box-main i {
            color: #17a2b8;
            margin-right: 5px;
        }
        .location-and-day{
            padding-left: 12px;
        }
        select{
        		padding: 10px;
        }
        select {
		    font-size: 14px; /* Kích thước font giống với input */
		    color: #76809B; /* Màu chữ mặc định */
		    padding: 10px;
		    border: 1px solid #17a2b8;
		    border-radius: 5px;
		    outline: none;
		    
		    margin: 0 5px;
		    appearance: none; /* Loại bỏ mũi tên mặc định của select trên một số trình duyệt */
		}
		 .location-select {
            border: 1px solid #17a2b8; /* Đường viền */
            border-radius: 5px; /* Bo tròn góc */
            padding: 10px; /* Khoảng cách bên trong */
            margin: 0 5px; /* Khoảng cách bên ngoài */
            outline: none; /* Không viền khi focus */
            width: calc(100% - 10px); /* Đảm bảo chiều rộng giống với input (bao gồm padding) */
            box-sizing: border-box; /* Đảm bảo kích thước bao gồm padding và border */
            font-size: 12px;
           
            
        }

        .select2-container--default .select2-selection--single {
            border: 1px solid #17a2b8; /* Đường viền */
            border-radius: 5px; /* Bo tròn góc */
            padding: 10px; /* Khoảng cách bên trong */
            height: 35px	; /* Chiều cao của select */
            display: flex; /* Để căn giữa nội dung */
            align-items: center; /* Căn giữa theo chiều dọc */
            font-size: 13px;
        }
        .select2-container .select2-selection--single {
	    color: #76809B; /* Màu chữ của ô select */
	    border: 1px solid #17a2b8; /* Giữ nguyên border */
	    border-radius: 5px; /* Giữ nguyên border-radius */
		}
		
		/* Thay đổi màu chữ của placeholder */
		.select2-container .select2-selection--single .select2-selection__placeholder {
		    color: #76809B; /* Màu chữ của placeholder */
		}
		
		/* Thay đổi màu chữ khi người dùng chọn giá trị */
		.select2-container--default .select2-selection--single .select2-selection__rendered {
		    color: #76809B; /* Màu chữ khi có giá trị đã chọn */
		}
		
		/* Thay đổi màu chữ của dropdown list */
		.select2-container--default .select2-results__option {
		    color: #76809B; /* Màu chữ của các tùy chọn trong dropdown */
		}.select2-container--default .select2-selection--single .select2-selection__clear {
		    margin-left: 5px; /* Khoảng cách bên trái của icon x */
		}
		.flatpickr-input {
    		color: #76809B; /* Màu chữ của ô input */
    		
		}
		
		/* Thay đổi màu chữ của các ngày trong calendar */
		.flatpickr-calendar .flatpickr-day {
		    color: #76809B; /* Màu chữ của các ngày */
		}
		
		/* Thay đổi màu chữ của ngày được chọn */
		.flatpickr-calendar .flatpickr-day.selected {
		    color: #fff; /* Màu chữ cho ngày được chọn */
		    background-color: #007bff; /* Màu nền cho ngày được chọn */
		}
		
		/* Thay đổi màu chữ cho ngày hiện tại */
		.flatpickr-calendar .flatpickr-day.today {
		    color: #e60000; /* Màu chữ cho ngày hôm nay */
		}
		
		/* Thay đổi màu chữ cho tháng và năm */
		.flatpickr-calendar .flatpickr-month {
		    color: #333; /* Màu chữ cho tháng */
		}
		.flatpickr-input[readonly] {
		    cursor: text;
		    margin: 0 2px;
		}
		.submenu {
		    display: none;
		    position: absolute; /* Cho phép định vị submenu chính xác */
		    background-color: #fff;
		    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
		    padding: 10px 0;
		    z-index: 1;
		    top: 100%; /* Đặt submenu nằm ngay dưới chữ "Giới thiệu" */
		    left: 120px;   /* Căn chỉnh submenu nằm bên dưới từ mép trái của mục "Giới thiệu" */
		    width: 150px; /* Đặt chiều rộng cố định cho menu (tuỳ chỉnh theo ý bạn) */
		}
		
		.submenu a {
		    color: #333;
		    padding: 10px 20px;
		    text-decoration: none;
		    display: block;
		}
		
		.submenu a:hover {
		    background-color: #f1f1f1;
		}

		/* Đảm bảo phần tử chứa mục Giới thiệu có relative để submenu định vị đúng */
		
		.btn-search:hover{
			cursor: pointer;
		}
		.fa-user:hover {
			cursor: pointer;
		}
		nav ul {
		    list-style-type: none;
		    margin: 0;
		    padding: 0;
		}
		
		nav ul li {
		    display: inline-block;
		    position: relative; /* Đặt position: relative để định vị menu con */
		}
		
		nav ul li a {
		    text-decoration: none;
		    padding: 10px;
		    display: inline-block;
		}
		
		.submenu {
		    display: none; /* Ban đầu ẩn menu con */
		    position: absolute;
		    background-color: #f9f9f9;
		    min-width: 160px;
		    box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.2);
		    z-index: 1;
		    top: 100%; /* Đặt menu con nằm ngay dưới mục "Giới thiệu" */
		    left: 0;    /* Căn chỉnh menu con thẳng hàng với mục "Giới thiệu" */
		}
		
		.submenu a {
		    padding: 12px 16px;
		    display: block;
		    color: black;
		    text-decoration: none;
		}
		
		.submenu a:hover {
		    background-color: #ddd;
		}
		
		/* Khi hover vào mục Giới thiệu, hiển thị menu con */
		.dropdown:hover .submenu {
		    display: block;
		}
		/* Định dạng cho user menu */
		.user-menu {
		    position: relative;
		    display: inline-block;
		}
		
		/* Menu con (ban đầu ẩn) */
		.user-submenu {
		    display: none; /* Ẩn menu con ban đầu */
		    position: absolute;
		    top: 100%; /* Đặt menu ngay dưới icon người dùng */
		    left: 0;
		    background-color: white;
		    min-width: 160px;
		    box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.2);
		    z-index: 1002; /* Cao hơn các thành phần khác */
		    font-size: 14px;
		}
		
		/* Các mục trong menu */
		.user-submenu a {
		    padding: 12px 16px;
		    display: block;
		    color: black;
		    text-decoration: none;
		    font-size: 14px;
		     width: 100%; 
		}
		
		/* Hiển thị menu khi hover vào icon người dùng */
		.user-menu:hover .user-submenu {
		    display: block;
		}
		
		/* Đổi màu nền khi hover vào mục trong menu */
		.user-submenu a:hover {
		    background-color: #ddd;
		}

    </style>
</head>
<body>
	<header>
    <div class="container">
        <div class="container">
            <div class="logo">
                <a href="home.html"><img src="/imagess/logo.png" alt="ND Travel Logo"></a>
            </div>
            <nav>
                <ul>
                    <li><a href="/home" id="home-link">Trang chủ</a></li>
                    <li class="dropdown">
                        <a href="#" id="aboutLink">Giới thiệu</a>
	                    <div id="aboutSubmenu" class="submenu">
					        <a href="/insurance-tour">Bảo hiểm tour</a>
					        <a href="/visa">Visa</a>
					    </div>
                    </li>
                    <li class="dropdown">
                        <a href="/search?s=" class="dropbtn" id="tour-link">Tour du lịch</a>
                    </li>
                    <li><a href="#" id="news-link">Tin tức</a></li>
                    <li><a href="#" id="faq-link">FAQs</a></li>
                    <li><a href="/contract" id="contact-link">Liên hệ</a></li>
                </ul>
            </nav>            
            <div class="icons">
                <a href="#"><i class="fas fa-search btn-search"></i></a>
                <div class="user-menu">
			        <a href="#"><i class="fa-regular fa-circle-user"></i></a>
			        <div class="user-submenu">
			            <a id="login" href="/">Đăng nhập</a>
			            <a id="register" href="/">Đăng ký</a>
			            <a href="/cart">Giỏ hàng</a>
			        </div>
			    </div>      
                <a href="#"><i class="fas fa-shopping-cart"></i></a>
                <span class="hotline">
                    <i class="fa-solid fa-headset"></i>
                    Hotline 1900 9999
                </span>
            </div>         
        </div>

        <!-- Div phụ (search-box) -->
        <div class="search-box" id="searchBox">
            <div class="empty-box" id="emptyBox"></div>
            <div class="search-top">
                <div class="search-container">
                    <input type="text" id="searchInput" placeholder="Nhập tên tour...">
                    <i class="fas fa-search" id="searchIcon"></i>
                </div>
            </div>
        </div>
      </div>
     </header>
	        <header class="header">
	        <div class="overlay">
	            <div class="content">
	                <h1>Du lịch cùng ND TRAVEL</h1>
	                <p>Vinh hạnh của chúng tôi là mang đến cho bạn những chuyến đi đáng nhớ. 
	                Mang đến cho bạn những chuyến đi đầy cảm hứng. Khám phá những vùng đất mới. Tự do khám phá cùng chúng tôi.</p>
	            </div>
	        </div>
	        <div class="search-container-main">
	        <div class="search-box-main">
	            <div >
	                <input id="mainSearchInput" type="text" placeholder="Bạn muốn đi đâu?">
	            </div>
	            <div class="location-and-day">
	                <i class="fas fa-map-marker-alt"></i>
	                
	                <select id="departureSelect" class="location-select" data-type="departure">
	                	<option value="" disabled selected>Chọn điểm đi</option>
						<option th:each="provinces: ${province}" th:value="${provinces.provinceId}" th:text="${provinces.name}">Chọn điểm đi</option>
					</select>
	            </div>
	            <div class="location-and-day">
	                <i class="fas fa-map-marker-alt"></i>
	                <select id="destinationSelect" class="location-select" data-type="destination">
	                	 <option value="" disabled selected>Chọn điểm đến</option>
						<option th:each="provinces: ${province}" th:value="${provinces.provinceId}" th:text="${provinces.name}">Chọn điểm đi</option>
					</select>
	            </div>
	            <div class="location-and-day">
				    <i class="fas fa-calendar-alt"></i>
				    <input type="text" id="departureDate" placeholder="Chọn ngày đi" >
				</div>
				<div >
					<button id="main-btn-search" >Tìm kiếm</button>
				</div>
	       
	        </div>
    	</div>
	    </header>
	    
	    <section class="why-choose-section">
	        <h2>Vì sao bạn nên chọn ND Travel</h2>
	        <div class="features">
	            <div class="feature">
	                <i class="fa-solid fa-filter-circle-dollar"></i>
	                <div class="text">
	                    <h3>Giá tốt nhất cho bạn</h3>
	                    <p>Có nhiều mức giá đa dạng phù hợp với ngân sách và nhu cầu của bạn.</p>
	                </div>
	            </div>
	            <div class="feature">
	                <i class="fa-solid fa-ticket"></i>
	                <div class="text">
	                    <h3>Booking dễ dàng</h3>
	                    <p>Các bước booking và chăm sóc khách hàng nhanh chóng và thuận tiện.</p>
	                </div>
	            </div>
	            <div class="feature">
	                <i class="fa-solid fa-suitcase-rolling"></i>
	                <div class="text">
	                    <h3>Tour du lịch tối ưu</h3>
	                    <p>Đa dạng các loại hình tour du lịch với nhiều mức giá khác nhau.</p>
	                </div>
	                
	            </div>
	        </div>
	    </section>
	    
	    <section class="booking-process-section">
	        <h2>Booking cùng ND Travel</h2>
	        <p>Chỉ với 3 bước đơn giản và dễ dàng có ngay trải nghiệm tuyệt vời!</p>
	        <div class="steps">
	            <div class="step">
	                <div class="step-number">1</div>
	                <img src="/image/location.png" alt="Find Destination Icon">
	                <h3>Tìm nơi muốn đến</h3>
	                <p>Bất cứ nơi đâu bạn muốn đến, chúng tôi có tất cả những gì bạn cần.</p>
	            </div>
	            <div class="step">
	                <div class="step-number">2</div>
	                <img src="/image/ticket.png" alt="Book Ticket Icon">
	                <h3>Đặt vé</h3>
	                <p>ND Travel sẽ hỗ trợ bạn đặt vé trực tiếp nhanh chóng và thuận tiện.</p>
	            </div>
	            <div class="step">
	                <div class="step-number">3</div>
	                <img src="/image/payment.png" alt="Payment Icon">
	                <h3>Thanh toán</h3>
	                <p>Hoàn thành bước thanh toán và sẵn sàng cho chuyến đi ngay thôi.</p>
	            </div>
	        </div>
	    </section>
	    <section class="tour-deals">
	        <h2>Tour giá tốt</h2>
	        <p>Hơn 1.000 tour đa dạng giá hời có hạn</p>
	        <div class="tour-cards">
	            <div th:each="tour : ${tours}" class="tour-card">
	                <!-- <img th:src="@{${tour.image}}" alt="Tour Image"> -->
	                <div class="tour-info">
	                    <p class="departure"><i class="fa-solid fa-location-dot"></i> Khởi hành từ: <span th:text="${tour.departure}"></span></p>
	                    <h3 th:text="${tour.tourName}"></h3>
	                    <p class="price" th:text="${tour.price} + ' VNĐ'"></p>
	                    <p class="duration">Ngày đi: <span th:text="${tour.startDate}"></span></p>
	                    <p class="duration">Ngày về: <span th:text="${tour.endDate}"></span></p>
	                </div>
	            </div>
	        </div>
	        <a href="#" class="see-more">Xem thêm →</a>
	    </section>
    

        <script>
            const searchBox = document.getElementById('searchBox');
            const emptyBox = document.getElementById('emptyBox');
            const searchBtn = document.querySelector('.btn-search');
        
            // Hàm để hiển thị hoặc ẩn search-box với hiệu ứng
            const toggleSearchBox = () => {
                if (searchBox.classList.contains('active')) {
                    // Nếu đang hiển thị, ẩn đi
                    searchBox.classList.remove('active');
                    setTimeout(() => {
                        searchBox.style.display = 'none'; // Ẩn hoàn toàn sau khi hiệu ứng kết thúc
                    }, 300); // Thời gian trùng khớp với thời gian hiệu ứng CSS
                } else {
                    // Nếu đang ẩn, hiển thị
                    searchBox.style.display = 'flex'; // Hiển thị trước khi thêm lớp active
                    setTimeout(() => {
                        searchBox.classList.add('active'); // Thêm lớp active để hiển thị hiệu ứng
                    }, 10); // Thời gian nhỏ để đảm bảo display: flex đã được áp dụng
                }
            };
        
            // Hiển thị search-box khi nhấn vào nút tìm kiếm
            searchBtn.addEventListener('click', toggleSearchBox);
        
            // Ẩn search-box khi nhấn vào nền (empty-box)
            emptyBox.addEventListener('click', () => {
                searchBox.classList.remove('active'); // Xóa lớp active khi nhấn vào nền
                setTimeout(() => {
                    searchBox.style.display = 'none'; // Ẩn hoàn toàn sau khi hiệu ứng kết thúc
                }, 300); // Thời gian trùng khớp với thời gian hiệu ứng CSS
            });
             // Lấy các phần tử
                const searchInput = document.getElementById('searchInput');
                const mainsearchInput = document.getElementById('mainSearchInput');
                const searchIcon = document.getElementById('searchIcon');
        		
                // Hàm chuyển hướng
                function redirectToSearch() {
                    const query = searchInput.value.trim(); // Lấy giá trị nhập vào và loại bỏ khoảng trắng thừa
                    if (query) {
                        // Chuyển hướng đến URL mới, có thể tùy chỉnh URL này theo nhu cầu
                        window.location.href = `http://localhost:8080/search?s=${encodeURIComponent(query)}`;
                    }else{
                	    alert("Vui lòng nhập thông tin tìm kiếm");
                	    return;
                    }
                }
                // Hàm chuyển hướng có đối số
                function redirectToSearch2() {
                    const query = mainsearchInput.value.trim(); // Lấy giá trị nhập vào và loại bỏ khoảng trắng thừa
                    if (query) {
                        // Chuyển hướng đến URL mới, có thể tùy chỉnh URL này theo nhu cầu
                        window.location.href = `http://localhost:8080/search?s=${encodeURIComponent(query)}`;
                    }
                }
                // Sự kiện nhấn Enter trong input
                searchInput.addEventListener('keydown', function (event) {
                    if (event.key === 'Enter') {
                        redirectToSearch();
                    }
                });
        
                // Sự kiện click vào icon tìm kiếm
                searchIcon.addEventListener('click', redirectToSearch);
                //Chỉnh placeholder cho chọn ngày đi
                flatpickr("#departureDate", {
                    dateFormat: "d-m-Y", // Định dạng ngày hiển thị
                    onChange: function(selectedDates, dateStr, instance) {
                        // Cập nhật giá trị cho ô input khi chọn ngày
                        document.getElementById('departureDate').value = dateStr;
                    }
                });
                //Khởi tạo Select2
                $(document).ready(function() {
                    $('.location-select').each(function() {
                var type = $(this).data('type'); // Lấy type từ thuộc tính data-type
                var placeholderText = type === 'departure' ? "Chọn điểm đi" : "Chọn điểm đến"; // Đặt placeholder tương ứng
        
                $(this).select2({
                    placeholder: placeholderText,
                    allowClear: true
                        });
                    });
                });
                $('.location-select').on('select2:open', function(e) {
                    $('.select2-results__options').hide().fadeIn(200); // 300ms là thời gian hiệu ứng
                });
        
                // Hiệu ứng Fade Out khi đóng select2
                $('.location-select').on('select2:close', function(e) {
                    $('.select2-results__options').fadeOut(200, function() {
                        $(this).hide(); // Sau khi hiệu ứng kết thúc, ẩn dropdown
                    });
                });
             // xử lý sự kiện ấn nút "tìm kiếm"
                document.getElementById('main-btn-search').addEventListener('click', function() {
                // Lấy giá trị từ các ô input và select
	                var tourName = document.getElementById('mainSearchInput').value;
	                var startDate = document.getElementById('departureDate').value;
	             // Chuyển đổi định dạng ngày từ dd-MM-yyyy sang yyyy-MM-dd
	                var formattedStartDate = "";
	                if (startDate) {
	                    var dateParts = startDate.split('-'); // Tách ngày, tháng, năm
	                    if (dateParts.length === 3) {
	                        formattedStartDate = dateParts[2] + '-' + dateParts[1] + '-' + dateParts[0]; // Chuyển đổi sang yyyy-MM-dd
	                    }
	                }
	             // Lấy text từ departureSelect
	                var departureSelect = document.getElementById('departureSelect');
	                var departureText = departureSelect.options[departureSelect.selectedIndex].text; // Lấy text của tùy chọn đã chọn
	                var departure = (departureText === "Chọn điểm đi") ? "" : departureText; // Nếu chọn "Chọn điểm đi" thì gán rỗng
	            
	                // Lấy text từ destinationSelect
	                var destinationSelect = document.getElementById('destinationSelect');
	                var destinationText = destinationSelect.options[destinationSelect.selectedIndex].text; // Lấy text của tùy chọn đã chọn
	                var destination = (destinationText === "Chọn điểm đến") ? "" : destinationText; // Nếu chọn "Chọn điểm đến" thì gán rỗng // Lấy text của tùy chọn đã chọn
	                
	                console.log("Tour Name: ", tourName);
	                console.log("Start Date: ", formattedStartDate);
	                console.log("Departure: ", departure);
	                console.log("Destination: ", destination);
	        
	                // Tạo URL với các tham số
	                var searchUrl = '/search?'; // Đường dẫn tới trang tìm kiếm
	        
	                // Thêm các điều kiện vào URL nếu có giá trị
	                if (tourName) {
	                    searchUrl += 'tourName=' + encodeURIComponent(tourName) + '&';
	                }
	                if (startDate) {
	                    searchUrl += 'startDate=' + encodeURIComponent(formattedStartDate) + '&';
	                }
	                if (departure) {
	                    searchUrl += 'departure=' + encodeURIComponent(departure) + '&';
	                }
	                if (destination) {
	                    searchUrl += 'destination=' + encodeURIComponent(destination) + '&';
	                }
	        
	                // Loại bỏ dấu "&" cuối cùng
	                searchUrl = searchUrl.slice(0, -1);
	        
	                // Redirect đến URL mới
	                if(tourName=="" && startDate=="" && departure=="" && destination==""){
	        	    	alert("Vui lòng nhập thông tin tìm kiếm");
	        	    	return;
	        	    }else{
	        	    	window.location.href = searchUrl;	
	        	    }
	                
                });
             
                async function getUser(){
                	let userId = sessionStorage.getItem("userId");
	                
	                if (userId) {
	                    // URL để gọi API
	                    const url = `http://localhost:8080/api-get-user?userId=${userId}`;
	                    try {
	                        // Thực hiện request tới API
	                        const request = new Request(url, {
	                            method: "GET",
	                            headers: {
	                                "Content-Type": "application/json",
	                            }
	                        });
	
	                        // Gọi API và đợi kết quả trả về
	                        const response = await fetch(request);
	
	                        // Kiểm tra nếu có lỗi khi gọi API
	                        if (!response.ok) {
	                            console.log("Error with API response", response);
	                            return;
	                        }
	
	                        // Lấy dữ liệu user từ API
	                        const user = await response.json();
	                        console.log(user);
	                        var userName = user.fullName;
	                        console.log(userName);
	                        
	                        var login = document.getElementById("login");
	                        login.innerHTML=userName;
	                        login.href = "/account?userId="+userId;
	                        var register = document.getElementById("register");
	                        register.innerHTML='Đăng xuất';
	                        register.href = "/home";
	                        register.addEventListener('click', function(event) {
	                        	sessionStorage.removeItem('userId');
	               
	                        });
	                        
	                        
	                    } catch (error) {
	                        console.error("Error fetching user data:", error);
	                    }
	                } else {
	                    console.log("userId is null or empty");
	                }
                }
                getUser();
            </script>
    
</body>
</html>
