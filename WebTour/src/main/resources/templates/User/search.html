<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Search Results</title>
<link
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
	rel="stylesheet" />
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link rel="stylesheet" href="/css/tourPage.css">

<style>
body {
	font-family: Arial, sans-serif;
	background-color: white;
	margin: 0;
}

.container {
	max-width: 1200px;
	margin: 0 auto;
	display: flex;
	flex-wrap: wrap;
	gap: 20px; /* Khoảng cách giữa các tour */
	justify-content: flex-start; /* Căn đều các thẻ tour */
}

#list-tour {
	justify-content: flex-start;
}

.card {
	background-color: #fff;
	border: 1px solid #e0e0e0;
	border-radius: 8px;
	overflow: hidden;
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
	flex: 1 1 calc(25% - 20px);
	/* Căn 4 thẻ trên 1 hàng, trừ đi khoảng cách giữa các thẻ */
	min-width: 250px; /* Chiều rộng tối thiểu để thẻ không quá hẹp */
	max-width: calc(25% - 20px);
	display: flex;
	flex-direction: column;
	margin-bottom: 20px;
	height: 100%; /* Giúp card có chiều cao bằng nhau */
	transition: transform 0.3s ease, box-shadow 0.3s ease;
	/* Hiệu ứng zoom nhẹ và đổ bóng */
	box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Bóng đổ mặc định */
	border-radius: 10px;
	overflow: hidden;
}

.card:hover {
	transform: scale(1.05); /* Zoom nhẹ toàn bộ tour */
	box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
	/* Đổ bóng nổi bật hơn khi hover */
	cursor: pointer;
}

.card img {
	transition: transform 0.3s ease; /* Hiệu ứng chuyển đổi cho ảnh */
	width: 100%; /* Đảm bảo ảnh chiếm toàn bộ chiều rộng */
	height: 185px;
	object-fit: cover; /* Đảm bảo ảnh không bị méo */
}

.card:hover img {
	transform: scale(1.1); /* Phóng to nhẹ ảnh khi hover */
}

.card-content {
	padding: 15px;
	display: flex;
	flex-direction: column;
	flex-grow: 1;
}

/* Giới hạn chiều cao tên tour và cho phép xuống dòng */
.card-content h3 {
	font-size: 16px;
	margin: 0 0 10px;
	line-height: 1.2;
	max-height: 3em;
	/* Giới hạn chiều cao tối đa cho tên tour, khoảng 2 dòng */
	overflow: hidden;
	text-overflow: ellipsis;
	display: -webkit-box;
	-webkit-box-orient: vertical;
	height: 38px;
}

.card-content p {
	margin: 5px 0;
	color: #757575;
	font-size: 13px;
	white-space: nowrap;
	/* Không cho phép xuống dòng ở các thông tin khác */
	overflow: hidden;
	text-overflow: ellipsis;
}

/* Giá tiền */
.card-content .price {
	font-size: 16px;
	color: #ff5722;
	font-weight: bold;
}

.pagination {
	display: flex;
	justify-content: center;
	align-items: center;
	list-style-type: none;
	padding: 0;
	margin-top: 20px;
}

.pagination li {
	margin: 0 5px;
}

.pagination a, .pagination button {
	text-decoration: none;
	color: #1e88e5;
	padding: 10px 15px;
	border: 1px solid #ddd;
	border-radius: 4px;
	background-color: #fff;
}

.pagination a:hover, .pagination button:hover {
	background-color: #eee;
}

.pagination .current {
	background-color: #1e88e5;
	color: white;
}

.pagination .icon {
	font-size: 18px;
}

.fas.fa-star.full {
	color: gold; /* Màu vàng cho sao đầy */
}

.fas.fa-star.empty {
	color: lightgray; /* Màu xám cho sao rỗng */
}

.fas.fa-star.half {
	background: linear-gradient(to right, gold 50%, lightgray 50%);
	color: transparent; /* Làm cho sao có nửa vàng và nửa xám */
	-webkit-background-clip: text;
	background-clip: text;
}
.filter{
	background-color: #f8f8f8;
    display: flex;
    justify-content: end;
    padding-right: 8%;
    padding-top: 20px;
}
</style>
</head>
<body>
	<header id="header"></header>
	<div class="filter">
		<label for="price-sort">Sắp xếp theo giá:</label>
		<select id="price-sort" name="price-sort" onchange="SortPrice()">
			<option value="0">Chọn</option>
		    <option value="1">Tăng giá</option>
		    <option value="2">Giảm giá</option>
		</select>
    
    </div>
	<div class="main-content">
		<div class="filter-container">
			<div class="search-right-box">
				<input type="text" class="search-input" placeholder="Điểm đến"> <i
					class="fa-brands fa-searchengin icon-search"></i>
			</div>
			<div class="price-filter-box">

				<div class="price-box-header">Giá tiền:</div>
				<div class="price-box">
					<label class="item-price"><input type="radio" name="option"
						value="0" onClick="showRangeBox(false)">Đang giảm giá</label><br>
				</div>
				<div class="price-box">
					<label class="item-price"><input type="radio" name="option"
						value="1" onClick="showRangeBox(false)">Dưới 1 triệu</label><br>
				</div>
				<div class="price-box">
					<label class="item-price"><input type="radio" name="option"
						value="2" onClick="showRangeBox(flase)">Từ 1 - 5 triệu</label><br>
				</div>
				<div class="price-box">
					<label class="item-price"><input type="radio" name="option"
						value="3" onClick="showRangeBox(false)"> trên 5 triệu</label><br>
				</div>
				<div class="price-box">
					<label class="item-price"><input type="radio" name="option"
						value="4" onClick="showRangeBox(true)"> Chọn mức giá</label><br>
				</div>

				<div class="price-range-container in-active">
					<label class="price-label">Chọn mức giá phù hợp</label>
					<div class="range-inputs">
						<input type="text" id="min-price" readonly> <input
							type="text" id="max-price" readonly>
					</div>
					<div class="slider-container">
						<div class="slider-track"></div>
						<input type="range" min="1000000" max="20000000" value="1500000"
							id="range-min"> <input type="range" min="1000000"
							max="20000000" value="4000000" id="range-max">
					</div>
				</div>

			</div>
			<div class="location-filter-box">
				<div class="location-header">Điểm xuất phát:</div>
				<div class="location-and-day search-right-box">
				<select id="departureSelect" class="location-select search-input" data-type="departure">
	                	<option value="" disabled selected>Chọn điểm đi</option>
						<option th:each="provinces: ${province}" th:value="${provinces.provinceId}" th:text="${provinces.name}">Chọn điểm đi</option>
					</select>
				</div>
				
			</div>
			<div class="start-date-filter-box">
				<div class="start-box-header">Ngày đi:</div>
				<div class="location-and-day search-right-box"> <input type="date"
						id="input-start-date" placeholder="Chọn ngày đi" class="search-input">
				</div>
			</div>
			<div class="finish-date-filter-box">
				<div class="finish-box-header">Ngày về:</div>
				<div class="location-and-day search-right-box"> <input type="date"
						id="departureDate" placeholder="Chọn ngày đi" class="search-input">
				</div>
			</div>
			<div class="transportation-filter-box">
				<div class="transportation-box-header">Di chuyển:</div>
				<div class="transportation-box">
					<label class="item-transportation"><input type="radio"
						name="option" value="0">Xe khách</label><br>
				</div>
				<div class="transportation-box">
					<label class="item-transportation"><input type="radio"
						name="option" value="1">Tàu hỏa</label><br>
				</div>
				<div class="transportation-box">
					<label class="item-transportation"><input type="radio"
						name="option" value="2">Máy bay</label><br>
				</div>
			</div>
			<div class="button-box">
			<button id="main-btn-search" >Tìm kiếm</button>
			</div>
			
		</div>
		<div class="list-tour-container">
			<div id="list-tour" class="container">

				<div class="card" th:each="tour : ${searchResults}"
					onclick="linktoDetailTour(this)" th:attr="data-id=${tour[0]}">
					<img th:src="@{'/image/' + ${tour[6]}}">
					<div class="card-content">
						<p>
							<i class="fas fa-map-marker-alt icon"></i> Khởi hành từ: <span
								th:text="${tour[1]}">Địa điểm khởi hành</span>
						</p>
						<h3 th:text="${tour[2]}">Tên tour</h3>
						<p class="rating"
							th:title="'Đánh giá ' +${tour[8]} + '/5(' + ${tour[9]} + ')'">
							<i class="fas fa-star"
								th:classappend="${tour[8] >= 1 ? ' full' : (tour[8] >= 0.5 ? ' half' : ' empty')}"></i>
							<i class="fas fa-star"
								th:classappend="${tour[8] >= 2 ? ' full' : (tour[8] >= 1.5 ? ' half' : ' empty')}"></i>
							<i class="fas fa-star"
								th:classappend="${tour[8] >= 3 ? ' full' : (tour[8] >= 2.5 ? ' half' : ' empty')}"></i>
							<i class="fas fa-star"
								th:classappend="${tour[8] >= 4 ? ' full' : (tour[8] >= 3.5 ? ' half' : ' empty')}"></i>
							<i class="fas fa-star"
								th:classappend="${tour[8] >= 5 ? ' full' : (tour[8] >= 4.5 ? ' half' : ' empty')}"></i>
						</p>

						<p class="price">
							<span class="tourPrice" th:text="${tour[3]}"></span> <span
								class="tourOriginalPrice" th:if="${tour[3] != tour[7]}"
								th:style="'text-decoration: line-through; color: grey;'"
								th:text="${tour[7]}"></span>
						</p>
						<p class="time">
							<i class="fas fa-clock icon"></i> Thời gian: <span
								class="tour-duration"
								th:attr="data-start-date=${tour[4]}, data-end-date=${tour[5]}">
							</span>
						</p>
					</div>
				</div>
			</div>

			<!-- Pagination -->
			<div class="pagination-container" th:if="${totalPages > 1}">
				<ul class="pagination" id="pagination">
					<li th:if="${currentPage > 0}">
						<button th:attr="onclick='loadPage(' + (${currentPage - 1}) + ')'">
							<i class="fas fa-chevron-left icon"></i>
						</button>
					</li>

					<li th:each="i : ${#numbers.sequence(1, totalPages)}"><a
						th:attr="onclick='loadPage(' + (${i - 1}) + ')'" th:text="${i}"
						th:class="${currentPage == i - 1} ? 'current' : ''"></a></li>

					<li th:if="${currentPage + 1 < totalPages}">
						<button th:attr="onclick='loadPage(' + (${currentPage + 1}) + ')'">
							<i class="fas fa-chevron-right icon"></i>
						</button>
					</li>
				</ul>
			</div>
		</div>

	</div>
	<div id="footer"></div>
	<script src="/js/header.js"></script>
	<script src="/js/search.js"></script>
	<script src="/js/tourPage.js"></script>
</body>
</html>
